<tool id="trinityrnaseq_dev" name="Trinity" version="0.0.1">
  
    <!-- Written by Jeremy Goecks, now maintained here by bhaas -->
    <description>De novo assembly of RNA-Seq data using Trinity with minimal inputs<</description>
    <requirements>
        <requirement type="package">trinity</requirement>
    </requirements>
    <command>
      Trinity --max_memory 240G --CPU 8 --normalize_reads --monitoring
      ## Inputs.
      #if str($inputs.paired_or_single) == "paired":
       --left $inputs.left_input --right $inputs.right_input
       #if $inputs.left_input.ext == 'fasta':
        --seqType fa
       #else:
        --seqType fq
       #end if
      #else:
       --single $inputs.input
       #if $inputs.input.ext == 'fasta':
        --seqType fa
       #else:
        --seqType fq
       #end if
      #end if
      ## direct to output
      > $trinity_log 2>&amp;1; cat trinity_out_dir/Trinity.timing >> $trinity_log
    </command>
    <stdio>
      <exit_code range="1:"   level="fatal"   description="Program failed" />
      <exit_code range=":-1"   level="fatal"   description="DRM killed job" />
    </stdio>
    <inputs>
      <conditional name="inputs">
	<param name="paired_or_single" type="select" label="Paired or Single-end data?">
          <option value="paired">Paired</option>
          <option value="single">Single</option>
        </param>
        <when value="paired">
          <param format="fasta,fastq" name="left_input" type="data" label="Left/Forward strand reads" help=""/>
          <param format="fasta,fastq" name="right_input" type="data" label="Right/Reverse strand reads" help=""/>
        </when>
        <when value="single">
          <param format="fasta,fastq" name="input" type="data" label="Single-end reads" help=""/>
        </when>
      </conditional>
    </inputs>
    <outputs>
      <data format="txt" name="trinity_log" label="${tool.name} on ${on_string}: log" />
      <data format="fasta" name="assembled_transcripts" label="${tool.name} on ${on_string}: Assembled Transcripts" from_work_dir="trinity_out_dir/Trinity.fasta"/>
    </outputs>
    <tests>
    </tests>
    <help>
        Trinity is a de novo transcript assembler that uses RNA-seq data as input. This tool runs all Trinity_ commands--Inchworm, Chrysalis, and Butterfly--in a single pass.

         This instance is running Trinity version 2.06 and uses the following command:
 
	 Trinity --max_memory 240G --CPU 8 --normalize_reads --monitoring --seqType seq_type --single singlefile or --left left_file --right right_file
 
 
         .. _Trinity: http://trinityrnaseq.github.io/

    </help>
</tool>
